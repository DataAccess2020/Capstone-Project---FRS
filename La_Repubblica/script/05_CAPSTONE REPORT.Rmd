---
title: "CAPSTONE PROJECT REPORT"
author: "Riccardo Ruta"
date: "24/2/2020"
output: 
  html_document:
    toc: true
    theme: spacelab
    highlight: pygments
    fig_caption: TRUE
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(cowplot)
library(ggplot2)
library(magick)
```


### TO START
The initial idea of this project was to scraping the homepage of a newspaper, downloading all the articles for analyze the text. In parallel to this goal there was to become as independent as possible in the management of the packages to do this kind of research.

After a first attempt on international newspapers we decided to continue with Italian newspapers that had fewer limitations (more favorable robots.txt).

I dealt with the newspaper Repubblica.it

I started using the "Rcrawler" package and managed to obtain the data necessary for the analysis, but not being able to obtain data that could be easily compared with my colleagues (they used the "Rvest" package), I also decided to use Rvest.

The work was divided into 3 main moments:
- Scrapyng
- Text analysis
- Sentiment analysis

### STEPS

The first steps were to create an organized structure of the project folders and create a "script setup" with the packages that were expected to be used, updating the list while working.

In the scraping part, the main difficulty was to find the correct CSS pattern, as the Repubblica website does not always use the same.

After downloading all the articles and obtaining the text, we organized the data in a convenient structure for subsequent analyzes.

At the end of this first step I saved the dataset in ".Rdata" so that I could load it later for the next steps.

For the part of txt analysis, the first operation was to separate the body of the article into single "clean" words, we started by using the tidytext package, finding it convenient to divide the words, when viewing the results we encountered problems. We were given the "quanteda" package so we continued with this, obtaining better results in the visualization of the results and also in the management of the analysis.

For the sentiment analysis part we used two dictionaries with which we weighed the words of the articles and we were able to get an overview of the emotions transmitted by the different newspapers (each organized according to its own sections).


### WHAT EMERGED FROM THE ANALYSIS

From the analysis of the text, the words that emerge as most used actually reflect the topics of the respective sections:

#### below, sections: cronaca and economia
```{r, echo = F, dodge-st, fig.show = "hold", out.width = "150%"}
p1 <- ggdraw() + draw_image("C:/Users/Riccardo/Desktop/git repo/CAPSTONE/Capstone-Project---FRS/plot/plot_cronaca.png")

p2 <- ggdraw() + draw_image("C:/Users/Riccardo/Desktop/git repo/CAPSTONE/Capstone-Project---FRS/plot/plot_economia.png")


plot_grid(p1, p2)

```

#### below, sections: esteri and politica
```{r, echo = F, fig.show = "hold", out.width = "150%"}
p3 <- ggdraw() + draw_image("C:/Users/Riccardo/Desktop/git repo/CAPSTONE/Capstone-Project---FRS/plot/plot_esteri.png")

p4 <- ggdraw() + draw_image("C:/Users/Riccardo/Desktop/git repo/CAPSTONE/Capstone-Project---FRS/plot/plot_politica.png")


plot_grid(p3, p4)
```

In general the most used word is "CORONAVIRUS" although the articles are prior to the "Italian cases" this was evidently a theme already very popular in Repubblica newspaper.

![](C:\Users\Riccardo\Desktop\git repo\CAPSTONE\Capstone-Project---FRS\plot\frequencies.png) ![](C:\Users\Riccardo\Desktop\git repo\CAPSTONE\Capstone-Project---FRS\plot\plot.png)

It is evident that this newspaper tends to use a language that conveys "good prospects" given that as a general trend the emotion produced is "divertito" and "soddisfatto".

```{r, echo = F, fig.show = "hold", out.width = "150%"}
p5 <- ggdraw() + draw_image("C:/Users/Riccardo/Desktop/git repo/CAPSTONE/Capstone-Project---FRS/plot/emotion_graph.png")

p6 <- ggdraw() + draw_image("C:/Users/Riccardo/Desktop/git repo/CAPSTONE/Capstone-Project---FRS/plot/emotion_ranked_graph.png")


plot_grid(p5, p6)
```

Through this graph we can observe that although there is a trend in the use of neutral language, the dichotomy between positive and negative tends towards positive language.

![](C:\Users\Riccardo\Desktop\git repo\CAPSTONE\Capstone-Project---FRS\plot\section_sentiment_graph.png)

### CONCLUDING
I understand that one of the limitation of this work is the reduced number of downloaded articles, nevertheless having a more "contained" dataset to manage has allowed us to concentrate better on the use of the functions and on the part of the code. This project will be of great help for the construction of more in-depth studies (such as the thesis).

In addition to having learned to use certain packages in R and to have become generally more confident with these jobs, thanks to this project I realized the importance, potential and difficulties of working in a team, an aspect that with this experience I believe fundamental for my future.
